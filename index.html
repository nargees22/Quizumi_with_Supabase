<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Quizumi</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              'clan-battle-bg': '#202A44',
              'gl-orange': {
                '50': '#FFF5F0',
                '100': '#FEEAE0',
                '200': '#FDD9C7',
                '300': '#FCC4A9',
                '400': '#FAA985',
                '500': '#F37037',
                '600': '#E8632A',
                '700': '#D9561F',
                '800': '#B5481A',
                '900': '#933B15',
              }
            },
            fontFamily: {
              sans: ['Quicksand', 'sans-serif'],
            },
          },
        },
      }
    </script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/qrcode-generator/qrcode.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300..700&display=swap" rel="stylesheet">
    <style>
      :root {
        --primary-500: #F37037; /* gl-orange-500 */
        --primary-600: #E8632A; /* gl-orange-600 */
        --primary-700: #D9561F; /* gl-orange-700 */
        --background: #F9FAFB;   /* slate-50 */
        --text-primary: #1E293B; /* slate-800 */
        --text-secondary: #64748B; /* slate-500 */
      }

      body {
        background-color: var(--background);
        color: var(--text-primary);
        font-family: 'Quicksand', sans-serif;
        overflow-x: hidden;
      }
      
      .background-shapes {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        overflow: hidden;
        z-index: -1;
      }
      .background-shapes::before, .background-shapes::after {
          content: '';
          position: absolute;
          border-radius: 50%;
          filter: blur(100px);
          opacity: 0.15;
      }
      .background-shapes::before {
          width: 400px;
          height: 400px;
          background-color: #FAA985; /* gl-orange-400 */
          top: -100px;
          left: -100px;
          animation: move-blob-1 20s infinite alternate ease-in-out;
      }
      .background-shapes::after {
          width: 500px;
          height: 500px;
          background-color: #F472B6; /* pink-400 */
          bottom: -150px;
          right: -150px;
          animation: move-blob-2 25s infinite alternate ease-in-out;
      }
      @keyframes move-blob-1 {
          from { transform: translate(-50px, -50px) scale(1); }
          to { transform: translate(50px, 100px) scale(1.2); }
      }
      @keyframes move-blob-2 {
          from { transform: translate(50px, 50px) scale(1.2); }
          to { transform: translate(-50px, -100px) scale(1); }
      }

      @keyframes fade-in {
        from { opacity: 0; }
        to { opacity: 1; }
      }
      @keyframes slide-in-up {
        from { transform: translateY(20px); opacity: 0; }
        to { transform: translateY(0); opacity: 1; }
      }
      @keyframes pop-in {
        0% { transform: scale(0.5); opacity: 0; }
        70% { transform: scale(1.1); opacity: 1; }
        100% { transform: scale(1); opacity: 1; }
      }
      @keyframes float-up {
        from {
          transform: translateY(0) scale(1);
          opacity: 1;
        }
        to {
          transform: translateY(-80vh) scale(1.5);
          opacity: 0;
        }
      }
      @keyframes spin-slow {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
      }
      @keyframes slide-in-left {
        from { transform: translateX(-50px); opacity: 0; }
        to { transform: translateX(0); opacity: 1; }
      }
      @keyframes slide-in-right {
        from { transform: translateX(50px); opacity: 0; }
        to { transform: translateX(0); opacity: 1; }
      }
      @keyframes zoom-in-out {
        0% { transform: scale(0.8); opacity: 0; }
        50% { transform: scale(1.1); opacity: 1; }
        100% { transform: scale(1); opacity: 1; }
      }


      /* Celebration Animations */
      @keyframes confetti-fall {
        0% { transform: translateY(-10vh) rotate(0deg); opacity: 1; }
        100% { transform: translateY(110vh) rotate(720deg); opacity: 0; }
      }
      
      @keyframes sparkle-pulse {
        0% { transform: scale(0.5); opacity: 0.5; }
        50% { transform: scale(1.2); opacity: 1; }
        100% { transform: scale(0.5); opacity: 0.5; }
      }

      @keyframes float-reaction {
        0% {
          transform: translateY(0) rotate(0deg) scale(1.2);
          opacity: 1;
        }
        100% {
          transform: translateY(-100vh) rotate(360deg) scale(0.8);
          opacity: 0;
        }
      }
      
      .confetti-piece {
        position: absolute;
        top: 0;
        width: 10px;
        height: 20px;
        opacity: 0;
        animation: confetti-fall 5s linear infinite;
      }
      
      .sparkle {
        position: absolute;
        width: 12px;
        height: 12px;
        background-color: white;
        clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
        animation: sparkle-pulse 1.5s ease-in-out infinite;
      }
      
      .reaction-emoji {
        position: absolute;
        bottom: 0;
        animation-name: float-reaction;
        animation-timing-function: linear;
        animation-fill-mode: forwards;
        will-change: transform, opacity;
        text-shadow: 0 0 5px rgba(0,0,0,0.1);
      }

      .animate-fade-in {
        animation: fade-in 0.5s ease-in-out forwards;
      }
      .animate-slide-in-up {
        animation: slide-in-up 0.5s ease-in-out forwards;
      }
      .animate-pop-in {
        animation: pop-in 0.5s ease-out forwards;
      }
      .animate-float-up {
        animation: float-up 4s ease-out forwards;
      }
      .animate-spin-slow {
        animation: spin-slow 20s linear infinite;
      }
      .animate-slide-in-left {
        animation: slide-in-left 0.8s cubic-bezier(0.25, 1, 0.5, 1) forwards;
      }
      .animate-slide-in-right {
        animation: slide-in-right 0.8s cubic-bezier(0.25, 1, 0.5, 1) forwards;
      }
      .animate-zoom-in-out {
        animation: zoom-in-out 1s ease-out forwards;
      }

      /* Toggle Switch Styles */
      .toggle-checkbox {
        -webkit-appearance: none;
        appearance: none;
        position: relative;
        display: inline-block;
        width: 44px; /* w-11 */
        height: 24px; /* h-6 */
        margin: 0;
        vertical-align: top;
        background-color: #e5e7eb; /* bg-gray-200 */
        border-radius: 9999px; /* rounded-full */
        border: 1px solid #d1d5db; /* border-gray-300 */
        transition: background-color 0.2s ease-in-out;
      }
      .toggle-checkbox:checked {
        background-color: var(--primary-600);
        border-color: var(--primary-600);
      }
      .toggle-checkbox::after {
        content: '';
        position: absolute;
        top: 2px;
        left: 2px;
        width: 18px; /* h-5, w-5 */
        height: 18px;
        background-color: white;
        border-radius: 9999px;
        box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
        transition: transform 0.2s ease-in-out;
      }
      .toggle-checkbox:checked::after {
        transform: translateX(20px);
      }
      
      /* Custom scrollbar for dropdowns */
      .custom-scrollbar {
        scrollbar-width: thin;
        scrollbar-color: #94a3b8 #f1f5f9; /* slate-400 slate-100 */
      }
      .custom-scrollbar::-webkit-scrollbar {
        height: 6px;
      }
      .custom-scrollbar::-webkit-scrollbar-track {
        background: #f1f5f9; /* slate-100 */
      }
      .custom-scrollbar::-webkit-scrollbar-thumb {
        background: #cbd5e1; /* slate-300 */
        border-radius: 3px;
      }
      .custom-scrollbar::-webkit-scrollbar-thumb:hover {
        background: #94a3b8; /* slate-400 */
      }

      .no-scrollbar::-webkit-scrollbar {
        display: none;
      }
      .no-scrollbar {
        -ms-overflow-style: none;  /* IE and Edge */
        scrollbar-width: none;  /* Firefox */
      }

      /* Custom Radio Button Styles */
      .custom-radio {
        -webkit-appearance: none;
        appearance: none;
        background-color: #fff;
        margin: 0;
        width: 1.25rem; /* 20px */
        height: 1.25rem; /* 20px */
        border: 2px solid #94a3b8; /* slate-400 */
        border-radius: 50%;
        display: grid;
        place-content: center;
        transition: border-color 0.2s ease-in-out;
      }
      .custom-radio::before {
        content: "";
        width: 0.75rem; /* 12px */
        height: 0.75rem; /* 12px */
        border-radius: 50%;
        transform: scale(0);
        transition: 120ms transform ease-in-out;
        background-color: #1e293b; /* slate-800 */
      }
      .custom-radio:checked {
        border-color: #1e293b; /* slate-800 */
      }
      .custom-radio:checked::before {
        transform: scale(1);
      }
      .custom-radio:focus-visible {
        outline: 2px solid var(--primary-500);
        outline-offset: 2px;
      }

      /* Global Light Scrollbar Styles */
      ::-webkit-scrollbar {
        width: 12px;
        height: 12px;
      }
      ::-webkit-scrollbar-track {
        background: #f1f5f9; /* slate-100 */
        border-radius: 10px;
      }
      ::-webkit-scrollbar-thumb {
        background-color: #cbd5e1; /* slate-300 */
        border-radius: 10px;
        border: 3px solid #f1f5f9; /* slate-100 */
      }
      ::-webkit-scrollbar-thumb:hover {
        background-color: #94a3b8; /* slate-400 */
      }
      /* For Firefox */
      * {
        scrollbar-width: thin;
        scrollbar-color: #94a3b8 #f1f5f9; /* thumb and track */
      }

      /* Versus Battle Screen Styles */
      .versus-container {
        display: flex;
        justify-content: space-around;
        align-items: flex-start;
        gap: 1rem;
        padding: 1rem;
      }
      .team-panel {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 0.75rem;
        padding: 2rem 1.5rem;
        background-color: rgba(255, 255, 255, 0.7);
        border: 2px solid #e2e8f0; /* slate-200 */
        border-radius: 1.5rem; /* 2xl */
        box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); /* lg shadow */
        width: 40%;
        transition: all 0.3s ease-in-out;
      }
      .team-logo {
        width: 6rem; /* 96px */
        height: 6rem; /* 96px */
        border-radius: 9999px; /* full */
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 3rem;
        font-weight: 800;
        color: white;
        border: 4px solid white;
        box-shadow: 0 0 15px rgba(0,0,0,0.2);
      }
      .team-name {
        font-size: 1.875rem; /* 2xl */
        font-weight: 700;
        color: #1e293b; /* slate-800 */
      }
      .team-score {
        font-size: 1.5rem; /* xl */
        font-weight: 700;
        color: var(--primary-600);
      }
      .vs-separator {
        font-size: 5.5rem;
        font-weight: 900;
        line-height: 1;
        /* Gradient Fill */
        background: linear-gradient(135deg, #FBBF24, #F37037); /* yellow-400 to gl-orange-500 */
        -webkit-background-clip: text;
        background-clip: text;
        -webkit-text-fill-color: transparent;
        /* Outline */
        -webkit-text-stroke: 2px #1E293B; /* slate-800 */
        /* Drop Shadow */
        text-shadow: 4px 4px 10px rgba(0, 0, 0, 0.3);
        transform: rotate(-8deg);
        align-self: center;
      }

      .winning-glow {
        animation: pulse-glow 2s infinite ease-in-out;
        border-color: #FBBF24; /* yellow-400 */
      }

      .player-clan-glow {
        animation: pulse-glow-player 2s infinite ease-in-out;
        border-color: var(--primary-600); /* gl-orange-600 */
      }

      /* 3D Clan Flag Styles */
      .clan-flag-container {
        width: 8rem; /* 128px */
        height: 7rem; /* 112px */
        position: relative;
        perspective: 500px;
        margin-bottom: 0.5rem;
      }

      .flag-pole {
        position: absolute;
        left: 0;
        top: 0;
        width: 6px;
        height: 100%;
        background: linear-gradient(to right, #888, #ccc, #888);
        border-radius: 3px;
        box-shadow: 2px 2px 5px rgba(0,0,0,0.3);
      }

      .flag-pole::after {
        content: '';
        position: absolute;
        top: -8px;
        left: -4px;
        width: 14px;
        height: 14px;
        background: gold;
        border-radius: 50%;
        box-shadow: 0 0 5px rgba(255, 215, 0, 0.7);
      }

      .flag-fabric {
        position: absolute;
        left: 6px;
        top: 0;
        width: 100%;
        height: 60%;
        background: linear-gradient(to right, var(--flag-color-1), var(--flag-color-2));
        clip-path: polygon(0 0, 100% 15%, 100% 85%, 0 100%);
        transform-origin: left center;
        animation: wave-flag 4s infinite ease-in-out;
        box-shadow: 2px 2px 10px rgba(0,0,0,0.2);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 2.5rem;
        font-weight: 800;
        color: white;
        text-shadow: 1px 1px 3px rgba(0,0,0,0.4);
      }

      @keyframes wave-flag {
        0%, 100% {
            transform: rotateY(20deg) rotateX(5deg) translateX(5px);
            clip-path: polygon(0 0, 100% 15%, 100% 85%, 0 100%);
        }
        50% {
            transform: rotateY(-20deg) rotateX(-5deg) translateX(-5px);
            clip-path: polygon(0 15%, 100% 0, 100% 100%, 0 85%);
        }
      }

      @keyframes pulse-glow {
        0%, 100% {
          box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05), 0 0 10px rgba(251, 191, 36, 0.5), 0 0 20px rgba(251, 191, 36, 0.3);
        }
        50% {
          box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05), 0 0 25px rgba(251, 191, 36, 0.9), 0 0 45px rgba(251, 191, 36, 0.6);
        }
      }

      @keyframes pulse-glow-player {
        0%, 100% {
          box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05), 0 0 10px rgba(232, 99, 42, 0.5), 0 0 20px rgba(232, 99, 42, 0.3);
        }
        50% {
          box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05), 0 0 25px rgba(232, 99, 42, 0.9), 0 0 45px rgba(232, 99, 42, 0.6);
        }
      }

      /* Sword Clash Animation Styles */
      .clash-animation-container {
        position: fixed;
        inset: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        background-color: var(--clan-battle-bg, #202A44);
        overflow: hidden;
        z-index: 100;
      }
      .sword-wrapper {
        position: absolute;
        width: 300px;
        height: 300px;
        opacity: 0;
        top: calc(50% - 150px);
        left: calc(50% - 150px);
      }
      .sword-1-wrapper {
        animation: sword-fly-in-1 2s cubic-bezier(0.25, 1, 0.5, 1) forwards;
      }
      .sword-2-wrapper {
        animation: sword-fly-in-2 2s cubic-bezier(0.25, 1, 0.5, 1) forwards;
      }
      .sword-svg {
        width: 100%;
        height: 100%;
        filter: drop-shadow(0 0 10px currentColor);
      }
      .vs-reveal-text {
        opacity: 0;
        font-size: 10rem;
        transform: scale(0.5);
        animation: vs-reveal-anim 1s ease-out 1s forwards;
      }
      .team-name-left, .team-name-right {
        position: absolute;
        top: 45%;
        font-size: 3.5rem; /* 56px */
        font-weight: 800; /* extrabold */
        color: white;
        text-shadow: 0 0 15px rgba(0,0,0,0.5);
        opacity: 0;
        white-space: nowrap;
      }
      .team-name-left {
        animation: team-name-fly-in-left 2s cubic-bezier(0.25, 1, 0.5, 1) forwards;
      }
      .team-name-right {
        animation: team-name-fly-in-right 2s cubic-bezier(0.25, 1, 0.5, 1) forwards;
      }

      @keyframes sword-fly-in-1 {
        0%   { transform: translate(-80vw, -80vh) rotate(-45deg); opacity: 1; }
        50%  { transform: translate(-60px, 0) rotate(45deg); opacity: 1; }
        51%  { transform: translate(-60px, 0) rotate(45deg) scale(1.05); } /* Impact effect */
        100% { transform: translate(-60px, 0) rotate(45deg); opacity: 0; }
      }
      @keyframes sword-fly-in-2 {
        0%   { transform: translate(80vw, -80vh) rotate(45deg); opacity: 1; }
        50%  { transform: translate(60px, 0) rotate(-45deg); opacity: 1; }
        51%  { transform: translate(60px, 0) rotate(-45deg) scale(1.05); } /* Impact effect */
        100% { transform: translate(60px, 0) rotate(-45deg); opacity: 0; }
      }
      @keyframes vs-reveal-anim {
        to { opacity: 1; transform: scale(1); }
      }
      @keyframes team-name-fly-in-left {
        0%   { transform: translateX(-50vw); opacity: 0; }
        50%  { transform: translateX(-180px); opacity: 1; }
        100% { transform: translateX(-180px); opacity: 0; }
      }
      @keyframes team-name-fly-in-right {
        0%   { transform: translateX(50vw); opacity: 0; }
        50%  { transform: translateX(180px); opacity: 1; }
        100% { transform: translateX(180px); opacity: 0; }
      }

      /* 3D Golden Trophy Styles */
      .trophy-container {
        position: relative;
        width: 200px;
        height: 200px;
        display: flex;
        align-items: center;
        justify-content: center;
        perspective: 1000px;
        margin-bottom: 0;
      }
      .trophy-glow {
        position: absolute;
        width: 100%;
        height: 100%;
        background: radial-gradient(circle, rgba(255, 215, 0, 0.6) 0%, rgba(255, 215, 0, 0) 65%);
        border-radius: 50%;
        animation: trophy-glow 3s infinite ease-in-out;
        z-index: 0;
      }
      @keyframes trophy-glow {
        0%, 100% { transform: scale(0.9); opacity: 0.7; }
        50% { transform: scale(1.1); opacity: 1; }
      }
      .trophy-3d {
        position: relative;
        width: 160px;
        height: 176px;
        transform-style: preserve-3d;
        animation: trophy-rotate 20s infinite linear;
        z-index: 1;
      }
      .trophy-svg {
        width: 100%;
        height: 100%;
        filter: drop-shadow(0 5px 8px rgba(0,0,0,0.4));
      }
      @keyframes trophy-rotate {
        from { transform: rotateY(-20deg); }
        to { transform: rotateY(340deg); }
      }
      .sparkle-particle {
        position: absolute;
        background-color: white;
        opacity: 0;
        animation: sparkle-float 4s infinite ease-in-out;
        filter: blur(1px);
        z-index: 0;
        clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
      }
      @keyframes sparkle-float {
        0%, 100% {
          opacity: 0;
          transform: translateY(20px) scale(0.5);
        }
        25%, 75% {
          opacity: 1;
          transform: scale(1.2);
        }
        50% {
          opacity: 0.8;
          transform: translateY(-50px) scale(0.8);
        }
      }

      /* Responsive styles for Team Battle */
      @media (max-width: 640px) {
        .versus-container {
          flex-direction: column;
          gap: 0.5rem;
          padding: 0.5rem;
        }
        .team-panel {
          width: 90%;
          padding: 1rem;
        }
        .vs-separator {
          font-size: 3rem;
          transform: rotate(0deg);
          margin: 0.25rem 0;
        }
        .team-name {
          font-size: 1.25rem;
        }
        .team-score {
          font-size: 1.125rem;
        }
        .clan-flag-container {
          width: 6rem;
          height: 5.25rem;
          margin-bottom: 0;
        }
        .flag-fabric {
          font-size: 2rem;
        }

        /* Responsive styles for Sword Clash Animation */
        .sword-wrapper {
          width: 200px;
          height: 200px;
          top: calc(50% - 100px);
          left: calc(50% - 100px);
        }
        .vs-reveal-text {
          font-size: 6rem;
        }
        .team-name-left, .team-name-right {
          font-size: 2rem;
          top: 48%;
        }
        @keyframes sword-fly-in-1 {
          0%   { transform: translate(-80vw, -80vh) rotate(-45deg); opacity: 1; }
          50%  { transform: translate(-40px, 0) rotate(45deg); opacity: 1; }
          51%  { transform: translate(-40px, 0) rotate(45deg) scale(1.05); }
          100% { transform: translate(-40px, 0) rotate(45deg); opacity: 0; }
        }
        @keyframes sword-fly-in-2 {
          0%   { transform: translate(80vw, -80vh) rotate(45deg); opacity: 1; }
          50%  { transform: translate(40px, 0) rotate(-45deg); opacity: 1; }
          51%  { transform: translate(40px, 0) rotate(-45deg) scale(1.05); }
          100% { transform: translate(40px, 0) rotate(-45deg); opacity: 0; }
        }
        @keyframes team-name-fly-in-left {
          0%   { transform: translateX(-50vw); opacity: 0; }
          50%  { transform: translateX(-120px); opacity: 1; }
          100% { transform: translateX(-120px); opacity: 0; }
        }
        @keyframes team-name-fly-in-right {
          0%   { transform: translateX(50vw); opacity: 0; }
          50%  { transform: translateX(180px); opacity: 1; }
          100% { transform: translateX(180px); opacity: 0; }
        }
      }
      
      /* Gamified Backgrounds */
      .quiz-bg-1 { background-image: linear-gradient(43deg, #4158D0 0%, #C850C0 46%, #FFCC70 100%); }
      .quiz-bg-2 { background-image: linear-gradient(160deg, #0093E9 0%, #80D0C7 100%); }
      .quiz-bg-3 { background-image: linear-gradient(45deg, #85FFBD 0%, #FFFB7D 100%); }
      .quiz-bg-4 { background-image: linear-gradient(19deg, #21D4FD 0%, #B721FF 100%); }
      .quiz-bg-5 { background-image: linear-gradient(0deg, #08AEEA 0%, #2AF598 100%); }
      .quiz-bg-6 { background-image: linear-gradient(45deg, #FA8BFF 0%, #2BD2FF 52%, #2BFF88 90%); }

      /* Lifeline & Gamification Animations */
      @keyframes strike-out {
        0% { transform: scale(1); opacity: 1; }
        50% { text-decoration: line-through; }
        100% { transform: scale(0.9); opacity: 0.3; text-decoration: line-through; }
      }
      .animate-strike-out {
        animation: strike-out 0.5s ease-out forwards;
      }

      @keyframes icon-pulse {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.1); }
      }
      .animate-icon-pulse {
        animation: icon-pulse 2s infinite ease-in-out;
      }
      
      @keyframes stamp-in {
        0% { transform: scale(3) rotate(-30deg); opacity: 0; }
        50% { transform: scale(0.9) rotate(5deg); opacity: 1; }
        70% { transform: scale(1.1) rotate(-2deg); }
        100% { transform: scale(1) rotate(0); }
      }
      .animate-stamp-in { 
        will-change: transform, opacity;
        animation: stamp-in 0.5s ease-out forwards; 
      }
      .animate-fade-out-delay { 
        will-change: transform, opacity;
        animation: fade-out-delay 2.5s ease-in-out forwards;
      }
      
      @keyframes toast-in-out {
        0% { transform: translate(-50%, 100px); opacity: 0; }
        15%, 85% { transform: translate(-50%, 0); opacity: 1; }
        100% { transform: translate(-50%, 100px); opacity: 0; }
      }
      .toast-notification {
        position: fixed;
        bottom: 2rem;
        left: 50%;
        z-index: 100;
        will-change: transform, opacity;
        animation: toast-in-out 3s ease-in-out forwards;
      }

      /* Lifeline Award Screen */
      @keyframes award-card-in {
        0% { transform: translateY(100vh) rotate(15deg) scale(0.8); }
        100% { transform: translateY(0) rotate(0) scale(1); }
      }
      @keyframes icon-glow {
          0%, 100% { filter: drop-shadow(0 0 10px currentColor) drop-shadow(0 0 20px currentColor); }
          50% { filter: drop-shadow(0 0 25px currentColor) drop-shadow(0 0 40px currentColor); }
      }
      @keyframes pulse-light {
          0%, 100% { opacity: 0.3; transform: scale(0.8); }
          50% { opacity: 0.1; transform: scale(1.2); }
      }
      .lifeline-award-overlay {
          position: fixed;
          inset: 0;
          background-color: rgba(0, 0, 0, 0.7);
          backdrop-filter: blur(8px);
          z-index: 100;
          display: flex;
          align-items: center;
          justify-content: center;
      }
      .lifeline-award-card {
          animation: award-card-in 0.7s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
      }
      .lifeline-icon-glow {
          animation: icon-glow 2s infinite ease-in-out;
      }
      .pulse-bg {
          position: absolute;
          inset: 0;
          border-radius: 50%;
          animation: pulse-light 3s infinite ease-in-out;
      }
      
      /* --- GAMIFIED Lifeline Bar --- */
      .lifeline-bar {
        position: relative;
        width: 100%;
        max-width: 300px;
        margin: 1.5rem auto 1rem;
        padding: 8px;
        background: linear-gradient(180deg, #334155 0%, #0f172a 100%); /* slate-700 to slate-900 */
        border-radius: 50px;
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3), inset 0 2px 4px rgba(255, 255, 255, 0.1);
        display: flex;
        justify-content: space-around;
        align-items: center;
        border-top: 2px solid #475569; /* slate-600 */
        border-bottom: 2px solid #000;
        clip-path: polygon(0% 50%, 10% 0%, 90% 0%, 100% 50%, 90% 100%, 10% 100%);
      }
      .lifeline-item {
        display: flex;
        flex-direction: column;
        align-items: center;
        position: relative;
      }
      .lifeline-button {
        width: 72px;
        height: 72px;
        border-radius: 50%;
        border: none;
        box-shadow: 0 5px 10px rgba(0,0,0,0.4), inset 0 2px 2px rgba(255,255,255,0.2);
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: all 0.2s ease-out;
        position: relative;
      }
      .lifeline-button:hover:not(:disabled) {
        transform: scale(1.1) translateY(-2px);
        box-shadow: 0 8px 20px rgba(0,0,0,0.4), inset 0 2px 2px rgba(255,255,255,0.2);
      }
      .lifeline-button:active:not(:disabled) {
          transform: scale(1.05) translateY(1px);
          box-shadow: 0 3px 8px rgba(0,0,0,0.4), inset 0 2px 2px rgba(255,255,255,0.2);
      }
      .lifeline-button > svg {
        width: 48px;
        height: 48px;
        color: white;
        filter: drop-shadow(0 0 5px rgba(0, 0, 0, 0.7));
      }

      /* 50:50 Orb Style */
      .lifeline-button.fifty-fifty-lifeline {
          background: radial-gradient(circle at 30% 30%, #a78bfa, #6d28d9); /* violet-400 to violet-800 */
          border: 3px solid #c4b5fd; /* violet-300 */
      }
      .lifeline-button.fifty-fifty-lifeline:hover:not(:disabled) {
          box-shadow: 0 8px 20px rgba(109, 40, 217, 0.4), 0 0 20px #a78bfa, inset 0 2px 2px rgba(255,255,255,0.3);
      }

      /* Point Doubler Orb Style */
      .lifeline-button.point-doubler-lifeline {
        background: radial-gradient(circle at 30% 30%, #fbbf24, #f59e0b); /* amber-400, amber-500 */
        border: 3px solid #fcd34d; /* amber-300 */
      }
      .lifeline-button.point-doubler-lifeline:hover:not(:disabled) {
        box-shadow: 0 8px 20px rgba(245, 158, 11, 0.4), 0 0 20px #fbbf24, inset 0 2px 2px rgba(255,255,255,0.3);
      }

      .lifeline-button:disabled {
        background: #64748b; /* slate-500 */
        border-color: #94a3b8; /* slate-400 */
        cursor: not-allowed;
        transform: none;
        box-shadow: 0 2px 5px rgba(0,0,0,0.4), inset 0 1px 1px rgba(0,0,0,0.2);
      }
      .lifeline-label {
        color: #d1d5db; /* gray-300 */
        font-size: 0.875rem;
        font-weight: 700;
        margin-top: 6px;
        text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
      }
      .lifeline-badge {
        position: absolute;
        top: -4px;
        right: -4px;
        background-color: #dc2626; /* red-600 */
        color: white;
        font-size: 0.9rem;
        font-weight: 800;
        border-radius: 50%;
        width: 28px;
        height: 28px;
        display: flex;
        align-items: center;
        justify-content: center;
        border: 2px solid white;
        box-shadow: 0 0 8px rgba(0,0,0,0.5);
      }
      .lifeline-used-overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        animation: stamp-in-fast 0.3s ease-out forwards;
      }
      .lifeline-used-overlay svg {
        width: 80%;
        height: 80%;
        color: #ef4444; /* red-500 */
        stroke: white;
        stroke-width: 8;
        paint-order: stroke fill;
        filter: drop-shadow(0 0 5px rgba(0,0,0,0.7));
      }
      @keyframes stamp-in-fast {
          0% { transform: scale(2.5) rotate(-20deg); opacity: 0; }
          60% { transform: scale(0.9) rotate(5deg); opacity: 1; }
          100% { transform: scale(1) rotate(0deg); }
      }
      @keyframes lifeline-active-glow {
          0%, 100% { 
            border-color: #fcd34d;
            box-shadow: 0 5px 10px rgba(0,0,0,0.4), 0 0 15px #fcd34d, inset 0 2px 2px rgba(255,255,255,0.3);
          }
          50% { 
            border-color: #fff;
            box-shadow: 0 5px 10px rgba(0,0,0,0.4), 0 0 30px #fbbf24, inset 0 2px 2px rgba(255,255,255,0.3);
          }
      }
      .active-lifeline-glow {
          animation: lifeline-active-glow 1.5s infinite ease-in-out;
      }

      /* --- NEW GAMIFIED 2X GLOW EFFECT (MASKING METHOD) --- */
      @keyframes rotate-glow-background {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
      }

      .point-doubler-active-effect {
        position: fixed;
        inset: 0;
        pointer-events: none;
        z-index: 999;
        animation: fade-in 0.5s ease-out;
        
        /* This element becomes a frame by using padding and a mask */
        padding: 12px; /* This determines the border width */
        border-radius: 20px;
        
        -webkit-mask:
          linear-gradient(#fff 0 0) content-box, /* The transparent area */
          linear-gradient(#fff 0 0); /* The opaque area */
        -webkit-mask-composite: xor; /* Punch the content-box hole out */
                mask:
          linear-gradient(#fff 0 0) content-box,
          linear-gradient(#fff 0 0);
        mask-composite: exclude;
      }

      /* The rotating gradient lives in a pseudo-element, which is clipped by the parent's mask */
      .point-doubler-active-effect::before {
        content: '';
        position: absolute;
        width: 250%;
        height: 250%;
        top: -75%;
        left: -75%;
        background: conic-gradient(
          from 90deg,
          #3b82f6, /* blue-500 */
          #a855f7, /* purple-600 */
          #ec4899, /* pink-500 */
          #f59e0b, /* amber-500 */
          #84cc16, /* lime-500 */
          #3b82f6
        );
        animation: rotate-glow-background 4s linear infinite;
      }
      
      /* Old ::after is no longer needed */
      .point-doubler-active-effect::after {
        content: none;
      }

      /* --- NEW Player Rank Highlight Glow --- */
      @keyframes pulse-glow-player-rank {
        0%, 100% {
          box-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05), 0 0 0 2px rgba(243, 112, 55, 0.4);
          border-color: #F37037; /* gl-orange-500 */
        }
        50% {
          box-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05), 0 0 0 4px rgba(243, 112, 55, 0.7), 0 0 15px rgba(243, 112, 55, 0.5);
          border-color: #FBBF24; /* yellow-400 */
        }
      }

      .player-rank-highlight-glow {
        animation: pulse-glow-player-rank 2s infinite ease-in-out;
        border-width: 2px;
      }
    </style>
  <script type="importmap">
{
  "imports": {
    "react/": "https://esm.sh/react@^19.1.1/",
    "react": "https://esm.sh/react@^19.1.1",
    "react-dom/": "https://esm.sh/react-dom@^19.1.1/",
    "react-router-dom": "https://esm.sh/react-router-dom@^7.8.1",
    "firebase/app": "https://esm.sh/firebase@10.12.2/app",
    "firebase/firestore": "https://esm.sh/firebase@10.12.2/firestore",
    "firebase/": "https://esm.sh/firebase@^12.1.0/",
    "@google/genai": "https://esm.sh/@google/genai"
  }
}
</script>
</head>
  <body>
    <div id="root"></div>
    <script type="module" src="/index.tsx"></script>
  </body>
</html>